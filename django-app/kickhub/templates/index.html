{% extends "base.html" %}
{% load static %}


{% block title %}KickHub{% endblock %}

{% block content %}

<h2>Catalog</h2>

<div class="card-container">
  {% for entry in items %}
    <div class="card">
      <a href="{% url 'item_detail' slug=entry.item.slug %}">
        {% if entry.item.image %}
          <img src="{{ entry.item.image.url }}" alt="{{ entry.item.name }}" class="card-img">
        {% else %}
          <img src="{% static 'images/default_placeholder.png' %}" alt="No image available" class="card-img">
        {% endif %}
        <h3>{{ entry.item.description }}</h3>
      </a>

      <p><strong>${{ entry.item.price }}</strong></p>

      <div class="card-form-container">
        <form method="post" action="{% url 'add_to_cart' %}" class="add-to-cart-form">
        {% csrf_token %}
        <input type="hidden" name="item_id" value="{{ entry.item.id }}">

        {% if entry.sizes %}
          <label for="size-{{ entry.item.id }}">Size:</label>
          <select name="size_id" id="size-{{ entry.item.id }}">
            {% for size in entry.sizes %}
            <option value="{{ size.id }}">
              {{ size.size }} ({{ size.quantity }} available)
            </option>
            {% endfor %}
          </select>
          <button type="submit">Add to Cart</button>
        {% else %}
          <span>No sizes available</span>
        {% endif %}
      </form>
    </div>
  </div>
  {% empty %}
    <p>No items available.</p>
  {% endfor %}
</div>

{% endblock %}
