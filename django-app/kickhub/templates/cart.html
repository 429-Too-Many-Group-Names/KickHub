{% extends "base.html" %}
{% load static %}

{% block title %}Greetings{% endblock %}

{% block content %}
<h1>{{ page_title }}</h1>
<p>{{ message }}</p>
<h2>Your Cart</h2>

<h3>Total: ${{ total }}</h3>

<div class="card-container">
  {% for cart_item in cart_items %}
    <div class="card">
      {% if cart_item.item.image %}
      <img src="{{ cart_item.item.image.url }}" alt="{{ cart_item.item.name }}" class="card-img">
      {% else %}
      <img src="{% static 'images/default_placeholder.png' %}" alt="No image available" class="card-img">
      {% endif %}

      <h3>{{ cart_item.item.description }}</h3>
      <p><strong>${{ cart_item.item.price }}</strong></p>
      <p>Quantity: {{ cart_item.quantity }}</p>
      <p>Size: {{ cart_item.size.size }}</p>

      <!-- Quantity controls -->
      <form method="POST" style="display:flex; gap:.5rem; align-items:center; margin-top:10px;">
        {% csrf_token %}
        <input type="hidden" name="cart_item_id" value="{{ cart_item.id }}">

        <!-- Decrement button -->
        <button type="submit" name="action" value="decrement">-</button>

        <!-- Increment button -->
        <button type="submit" name="action" value="increment">+</button>

        <!-- Remove button -->
        <button type="submit" name="action" value="remove" style="margin-left: 10px;">
          Remove
        </button>
      </form>
    </div>
  {% empty %}
    <li>Your cart is empty.</li>
  {% endfor %}
</div>


{% if cart_items %}
    <form style="display: flex; justify-content: center;" action="{% url 'checkout' %}" method="POST">
  {% csrf_token %}
  
  <button type="submit" id="checkout-button">
    Proceed to Checkout
  </button>
</form>
{% endif %}



<!-- Proceed to checkout button (black + rounded) -->
<div style="margin-top:16px;">

</div>
{% endblock %}
